name: Deno Deploy

on:
  push:
  workflow_dispatch:

jobs:
  deploy:
    uses: ubiquity/deno-deploy-workflow/.github/workflows/deno-deploy-reusable.yml@main
    with:
      project: partner-ubq-fi
      entrypoint: serve.ts
      bun_version: 1.2.x
      deno_version: 2.x
      install_command: bun install
      build_command: bun run build
      runtime_env: |
        STATIC_DIR=out
      include: |
        out/**
      index_html_path: static/index.html
      debug_fetch_fail: true
    secrets:
      DENO_DEPLOY_TOKEN: ${{ secrets.DENO_DEPLOY_TOKEN }}
